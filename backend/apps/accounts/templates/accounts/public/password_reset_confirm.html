{% extends 'accounts/auth_base.html' %}

{% block sidebar_icon %}🔐{% endblock %}
{% block sidebar_title %}Yeni Şifre{% endblock %}
{% block sidebar_description %}Hesabınız için güçlü bir şifre belirleyin{% endblock %}

{% block auth_content %}
{% if validlink %}
    <h4 class="mb-1">Yeni Şifre Oluştur</h4>
    <p class="text-muted small mb-3">Hesabınız için yeni bir şifre belirleyin</p>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="mb-2">
            <label for="new_password1" class="form-label">Yeni Şifre</label>
            <input type="password" 
                   class="form-control {% if errors.new_password1 %}is-invalid{% endif %}" 
                   id="new_password1" 
                   name="new_password1" 
                   required 
                   autofocus>
            {% if errors.new_password1 %}
                <div class="invalid-feedback small">
                    {% for error in errors.new_password1 %}{{ error }}{% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="new_password2" class="form-label">Yeni Şifre Tekrar</label>
            <input type="password" 
                   class="form-control {% if errors.new_password2 %}is-invalid{% endif %}" 
                   id="new_password2" 
                   name="new_password2" 
                   required>
            {% if errors.new_password2 %}
                <div class="invalid-feedback small">
                    {% for error in errors.new_password2 %}{{ error }}{% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="d-grid mb-3">
            <button type="submit" class="btn btn-primary">Şifreyi Güncelle</button>
        </div>
    </form>
{% else %}
    <h4 class="mb-1">Geçersiz Link</h4>
    <p class="text-muted small mb-3">Şifre sıfırlama linki geçersiz veya süresi dolmuş</p>
    
    <div class="d-grid mb-3">
        <a href="{% url 'accounts:password_reset' %}" class="btn btn-primary">Yeni Link İste</a>
    </div>
{% endif %}

<div class="text-center small">
    <a href="{% url 'accounts:login' %}">← Giriş sayfasına dön</a>
</div>
{% endblock %}
