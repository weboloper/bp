{% extends 'accounts/base_authenticated.html' %}

{% block main_content %}
<div class="page-header">
    <h2>Profil Güncelle</h2>
</div>

<div class="form-container">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-sections">
            <div class="form-section">
                <h3>Kişisel Bilgiler</h3>
                
                <div class="form-group">
                    <label for="first_name">Ad</label>
                    <input type="text" id="first_name" name="first_name" 
                           value="{{ user_form.first_name.value|default:'' }}" maxlength="30">
                    {% if user_form.first_name.errors %}
                        <div class="error">
                            {% for error in user_form.first_name.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="last_name">Soyad</label>
                    <input type="text" id="last_name" name="last_name" 
                           value="{{ user_form.last_name.value|default:'' }}" maxlength="30">
                    {% if user_form.last_name.errors %}
                        <div class="error">
                            {% for error in user_form.last_name.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="birth_date">Doğum Tarihi</label>
                    <input type="date" id="birth_date" name="birth_date" 
                           value="{{ profile_form.birth_date.value|default:'' }}">
                    {% if profile_form.birth_date.errors %}
                        <div class="error">
                            {% for error in profile_form.birth_date.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-section">
                <h3>Profil Detayları</h3>

                <div class="form-group">
                    <label for="avatar">Profil Resmi</label>
                    {% if user.profile.avatar %}
                        <div class="current-avatar">
                            <img src="{{ user.profile.avatar.url }}" alt="Mevcut Avatar">
                        </div>
                    {% endif %}
                    <input type="file" id="avatar" name="avatar" accept="image/*">
                    {% if profile_form.avatar.errors %}
                        <div class="error">
                            {% for error in profile_form.avatar.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                    <small>JPG, PNG formatları desteklenir. Max boyut: 5MB</small>
                </div>

                <div class="form-group">
                    <label for="bio">Hakkımda</label>
                    <textarea id="bio" name="bio" rows="4" maxlength="500" 
                              placeholder="Kendiniz hakkında kısa bilgi...">{{ profile_form.bio.value|default:'' }}</textarea>
                    {% if profile_form.bio.errors %}
                        <div class="error">
                            {% for error in profile_form.bio.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                    <small>Maksimum 500 karakter</small>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <a href="{% url 'accounts:profile' %}" class="btn btn-secondary">← Geri</a>
            <button type="submit" class="btn btn-primary">Profili Güncelle</button>
        </div>
    </form>
</div>

<div class="account-settings">
    <h3>Hesap Ayarları</h3>
    <div class="settings-buttons">
        <a href="{% url 'accounts:username_change' %}" class="btn btn-outline">Kullanıcı Adı Değiştir</a>
        <a href="{% url 'accounts:email_change' %}" class="btn btn-outline">Email Değiştir</a>
        <a href="{% url 'accounts:password_change' %}" class="btn btn-outline">Şifre Değiştir</a>
    </div>
</div>
{% endblock %}