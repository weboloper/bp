# Development Caddyfile - HTTP only (zorla)
{
    # HTTPS'i tamamen devre dışı bırak
    auto_https off
    # Admin API'yi kapat
    admin off
}

# HTTP only - redirect yok
:80, myproject.local:80 {
    # Static dosyalar
    handle /static/* {
        root * /
        file_server
        header Cache-Control "public, max-age=2592000, immutable"
    }
    
    # Media dosyalar
    handle /media/* {
        root * /media
        file_server
        header Cache-Control "public, max-age=604800"
    }
    
    # Health check
    handle /health {
        respond "healthy" 200
    }
    
    # Diğer tüm istekleri backend'e proxy
    reverse_proxy backend:8000 {
        header_up Host {host}
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
    }
}
