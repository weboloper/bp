# Development Caddyfile - otomatik HTTPS devre dışı
{
    # Development için otomatik HTTPS'i kapat
    auto_https off
    # Admin API'yi devre dışı bırak
    admin off
}

# Development server (HTTP only)
:80 {
    # Backend'e proxy
    reverse_proxy /api/* backend:8000
    reverse_proxy /admin/* backend:8000
    reverse_proxy /auth/* backend:8000
    
    # Static dosyalar
    handle /static/* {
        root * /static
        file_server
        header Cache-Control "public, max-age=2592000, immutable"
    }
    
    # Media dosyalar
    handle /media/* {
        root * /media
        file_server
        header Cache-Control "public, max-age=604800"
    }
    
    # Health check
    handle /health {
        respond "healthy" 200
    }
    
    # Diğer tüm istekleri backend'e yönlendir
    reverse_proxy backend:8000 {
        header_up Host {host}
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
    }
}
